<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
    <style>
        .direction-marker {
            position: relative;
            width: 250px;
            height: 250px;
            display: inline-block;
            --direction: 0deg;
        }

        .circle {
            display: grid;
            place-items: center;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background-color: bisque;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
            position: absolute;
        }

         .arrow {
             width: 120px;
             height: 180px;
             background-color: #1e40af;
            /* The polygon points define the arrow head and the notched tail */
            clip-path: polygon(
                0% 100%,
                50% 70%,
                100% 100%,
                50% 0%
            );
             transform: rotate(var(--direction, 0deg));
        }
    </style>
</head>
<body>
	<div class="direction-marker">
        <div class="circle">
            <div class="arrow"></div>
        </div>
    </div>
</body>
<script>
    /**
     * Calculates the direction angle (bearing) between two points.
     * measured clockwise from north
     */
    function calculateBearing(coords) {
        const toRad = (deg) => (deg * Math.PI) / 180;
        const toDeg = (rad) => (rad * 180) / Math.PI;

        const lat1 = toRad(parseFloat(coords[0].lat));
        const lon1 = toRad(parseFloat(coords[0].lng));
        const lat2 = toRad(parseFloat(coords[1].lat));
        const lon2 = toRad(parseFloat(coords[1].lng));

        const dLon = lon2 - lon1;

        const y = Math.sin(dLon) * Math.cos(lat2);
        const x = Math.cos(lat1) * Math.sin(lat2) -
                Math.sin(lat1) * Math.cos(lat2) * Math.cos(dLon);

        let bearing = toDeg(Math.atan2(y, x));
        
        // Normalize to 0-360 range
        return (bearing + 360) % 360;
    }

    // Test cases

    // Eiffel Tower → Arc de Triomphe
    const direction_1 = calculateBearing([
        {"lat": "48.8584", "lng": "2.2945"},
        {"lat": "48.8738", "lng": "2.2950"}
    ]);
    console.log("Expected: 1.2. Result: ", direction_1.toFixed(1));

    // Eiffel Tower → Notre-Dame Cathedral
    const direction_2 = calculateBearing([
        {"lat": "48.8584", "lng": "2.2945"},
        {"lat": "48.8530", "lng": "2.3499"}
    ]);
    console.log("Expected: 96. Result: ", direction_2.toFixed(1));

    // Big Ben (Elizabeth Tower) → London Eye
    const direction_3 = calculateBearing([
        {"lat":"51.5007","lng":"-0.1246"},
        {"lat":"51.5033","lng":"-0.1194"}
    ]);
    console.log("Result: ",direction_3.toFixed(1));

    // Times Square → Statue of Liberty
    const direction_4 = calculateBearing([
        {"lat":"40.7580","lng":"-73.9855"},
        {"lat":"40.6892","lng":"-74.0445"}
    ]);
    console.log("Expected: 212. Result: ",direction_4.toFixed(1));

    // Eiffel Tower → Statue of Liberty
    const direction_5 = calculateBearing([
        {"lat": "48.8584", "lng": "2.2945"},
        {"lat":"40.6892","lng":"-74.0445"}
    ]);
    console.log("Result: ",direction_5.toFixed(1));

    const marker = document.querySelector('.direction-marker');
    // you can change the direction here to see the arrow rotate
    marker.style.setProperty('--direction', `${direction_1}deg`);

</script>
</html>